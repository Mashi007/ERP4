/// components/dashboard-charts.tsx
import React from "react";
import { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from "chart.js";
import { Bar } from "react-chartjs-2";
import { formatEUR } from "@/lib/currency";

ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);

const PipelineChart = ({ data }) => {
  return (
    <div>
      {data.map((d) => (
        <div key={d.id}>
          <span className="text-muted-foreground">{`${formatEUR(d.value || 0)} Â· ${d.count}`}</span>
        </div>
      ))}
    </div>
  );
};

export default PipelineChart;

// app/dashboard/page.tsx
import React from "react";
import { formatEUR } from "@/lib/currency";
import DashboardLayout from "@/components/layouts/dashboard";
import { useDashboardData } from "@/hooks/useDashboardData";

const DashboardPage = () => {
  const { data } = useDashboardData();

  return (
    <DashboardLayout>
      <div className="flex flex-col space-y-4">
        <div className="bg-white p-4 rounded-lg shadow">
          <h2 className="text-xl font-bold">Ingresos (pipeline)</h2>
          <div className="text-2xl font-bold">{formatEUR(data.totals.totalRevenue)}</div>
        </div>
        {/* ** rest of code here ** */}
      </div>
    </DashboardLayout>
  );
};

export default DashboardPage;

// app/deals/page.tsx
import React from "react";
import { formatEUR } from "@/lib/currency";
import DealsLayout from "@/components/layouts/deals";
import { useDealsData } from "@/hooks/useDealsData";

const DealsPage = () => {
  const { deals, totalValue, weightedValue } = useDealsData();

  return (
    <DealsLayout>
      <div className="flex flex-col space-y-4">
        <div className="bg-white p-4 rounded-lg shadow">
          <h2 className="text-xl font-bold">Total Value</h2>
          <div className="text-2xl font-bold">{formatEUR(totalValue)}</div>
        </div>
        <div className="bg-white p-4 rounded-lg shadow">
          <h2 className="text-xl font-bold">Weighted Value</h2>
          <div className="text-2xl font-bold">{formatEUR(Math.round(weightedValue))}</div>
        </div>
        <div className="bg-white p-4 rounded-lg shadow">
          <h2 className="text-xl font-bold">Deals</h2>
          <ul>
            {deals.map((deal) => (
              <li key={deal.id}>
                <span className="text-lg font-bold text-green-600">{formatEUR(deal.value)}</span>
              </li>
            ))}
          </ul>
        </div>
        {/* ** rest of code here ** */}
      </div>
    </DealsLayout>
  );
};

export default DealsPage;

// app/pipeline/embudo/page.tsx
import React from "react";
import { formatEUR } from "@/lib/currency";
import PipelineLayout from "@/components/layouts/pipeline";
import { usePipelineData } from "@/hooks/usePipelineData";

const EmbudoPage = () => {
  const { stages, deals } = usePipelineData();

  return (
    <PipelineLayout>
      <div className="flex flex-col space-y-4">
        {stages.map((stage) => {
          const stageValue = deals.reduce((acc, deal) => acc + deal.value, 0);
          return (
            <div key={stage.id}>
              <h2 className="text-xl font-bold">{stage.name}</h2>
              <div className="text-2xl font-bold">{formatEUR(Math.round(stageValue))}</div>
              <ul>
                {deals.map((deal) => (
                  <li key={deal.id}>
                    <span className="text-lg font-bold text-green-600">{formatEUR(deal.value)}</span>
                  </li>
                ))}
              </ul>
            </div>
          );
        })}
        {/* ** rest of code here ** */}
      </div>
    </PipelineLayout>
  );
};

export default EmbudoPage;

// app/pipeline/oportunidades/page.tsx
import React from "react";
import { formatEUR } from "@/lib/currency";
import PipelineLayout from "@/components/layouts/pipeline";
import { usePipelineData } from "@/hooks/usePipelineData";

const OportunidadesPage = () => {
  const { deals } = usePipelineData();

  const currency = (n: number) => {
    return formatEUR(n);
  };

  return (
    <PipelineLayout>
      <div className="flex flex-col space-y-4">
        <div className="bg-white p-4 rounded-lg shadow">
          <h2 className="text-xl font-bold">Deals</h2>
          <ul>
            {deals.map((deal) => (
              <li key={deal.id}>
                <span className="text-lg font-bold text-green-600">{formatEUR(deal.value)}</span>
              </li>
            ))}
          </ul>
        </div>
        {/* ** rest of code here ** */}
      </div>
    </PipelineLayout>
  );
};

export default OportunidadesPage;
